# Database Analysis Report

**Generated:** 2026-01-26T07:30:05.102Z  
**Database:** zawadi_db?schema=public

## Summary

| Metric | Count |
|--------|-------|
| Schools | 3 |
| Branches | 1 |
| Users | 244 |
| Learners | 328 |
| Classes | 0 |
| Total Assessments | 11 |

## Table Details

| Table | Records | Has schoolId | Has branchId |
|-------|---------|--------------|-------------|
| schools | 3 | âŒ | âŒ |
| branches | 1 | âœ… | âŒ |
| users | 244 | âœ… | âœ… |
| learners | 328 | âœ… | âœ… |
| classes | 0 | âŒ | âœ… |
| formative_assessments | 3 | âŒ | âŒ |
| summative_tests | 3 | âŒ | âŒ |
| summative_results | 5 | âŒ | âŒ |
| attendances | 0 | âŒ | âŒ |
| stream_configs | 2 | âœ… | âŒ |

## Tenant Integrity Check

| Issue | Count |
|-------|-------|
| Formative assessments without school link | 0 |
| Summative tests without school link | 1 |
| Summative results without school link | 0 |
| Classes without branch | 0 |
| Learners without school | 0 |

## âš ï¸ Orphaned Data Issues

### users

**Issue:** Non-admin users without school assignment  
**Count:** 8  

**Examples:**
```json
[
  {
    "id": "24f257bb-d7d5-41e8-bbb0-ac6dcfe6c9d7",
    "email": "receptionist@local.test",
    "role": "RECEPTIONIST"
  },
  {
    "id": "2a9277ea-bb05-4f1f-96db-7fbb87582989",
    "email": "admin@local.test",
    "role": "ADMIN"
  },
  {
    "id": "40609c65-95c8-4ac0-b274-b786f2100336",
    "email": "accountant@local.test",
    "role": "ACCOUNTANT"
  },
  {
    "id": "91476845-8b4d-444a-bc82-2eed1f24a8f6",
    "email": "john.doe@example.com",
    "role": "ADMIN"
  },
  {
    "id": "98c60cac-6060-46c4-bc27-773e25cf293d",
    "email": "info@amalgamate.co.ke",
    "role": "ADMIN"
  }
]
```

## ğŸ’¡ Recommendations

- âš ï¸  Fix orphaned data before proceeding with Phase 2 migration
- âš ï¸  Some summative tests have invalid creator references - clean up before migration
- âš ï¸  8 non-admin users are not assigned to schools - assign them before migration
